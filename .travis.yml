language: ruby
sudo: false
rvm:
  - 1.9.3
  - 2.2.3
  - jruby-1.7.4
  - jruby-1.7.23
jdk:
  - openjdk7 # for jruby
before_script:
  - export JRUBY_OPTS="--server -J-Xss1024k -J-Xmx652m -J-XX:+UseConcMarkSweepGC"
  - export JRUBY_OPTS="$JRUBY_OPTS -Xcompile.invokedynamic=false" # JRuby 1.7.4
matrix:
  allow_failures:
    #- rvm: jruby-1.7.4
env:
  global:
    - ARUBA_TIMEOUT=120
    - RAILS_ENV=development
    - AHN_ENV=development
  matrix:
    - PB_VERSION="~> 2.7.5"
    - PB_VERSION="develop-dialogtech-2.7"
#notifications:
#  irc: "irc.freenode.org#adhearsion"
matrix:
  include:
    - jdk: oraclejdk7
      env: AS_VERSION=4.2.5 PB_VERSION="develop-dialogtech-2.7"
      rvm: jruby-1.7.4
    - jdk: oraclejdk7
      env: AS_VERSION=4.1.14 PB_VERSION="develop-dialogtech-2.7"
      rvm: jruby-1.7.23
